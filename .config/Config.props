<?xml version="1.0" encoding="utf-8"?>
<Project>
    <!-- ConfiguraciÃ³n general -->
    <PropertyGroup>
        <Configurations>Debug;Release</Configurations>
        <Platforms>AnyCPU;x64;x86;arm;arm64</Platforms>
        <RuntimeIdentifiers Condition="'$(Configuration)'=='Release'">
            win-x64;win-x86;win-arm64;
            linux-x64;linux-arm;linux-arm64;
            osx-x64;osx-arm64
        </RuntimeIdentifiers>
    </PropertyGroup>

    <!-- Generator: siempre netstandard2.0 -->
    <PropertyGroup Condition="$(AssemblyName.Contains('Generator'))">
        <TargetFramework>netstandard2.0</TargetFramework>
    </PropertyGroup>

    <!-- Aplicaciones principales -->
    <PropertyGroup Condition="$(AssemblyName.Contains('App'))">
        <TargetFramework>net8.0</TargetFramework>
    </PropertyGroup>

    <PropertyGroup Condition="$(AssemblyName.Contains('Test'))">
        <TargetFramework>net8.0</TargetFramework>
    </PropertyGroup>

    <PropertyGroup Condition="$(AssemblyName.Contains('Sample'))">
        <TargetFramework>net8.0</TargetFramework>
    </PropertyGroup>

    <PropertyGroup Condition="$(AssemblyName.Contains('Web'))">
        <TargetFramework>net8.0</TargetFramework>
    </PropertyGroup>

    <PropertyGroup Condition="$(AssemblyName.Contains('Benchmark'))">
        <TargetFramework>net8.0</TargetFramework>
    </PropertyGroup>

    <!-- Proyectos Release modernos (excepto Generator y Apps especiales) -->
    <PropertyGroup Condition="
        '$(Configuration)'=='Release' AND 
        !$(AssemblyName.Contains('Generator')) AND
        !$(AssemblyName.Contains('App')) AND
        !$(AssemblyName.Contains('Test')) AND
        !$(AssemblyName.Contains('Sample')) AND
        !$(AssemblyName.Contains('Web')) AND
        !$(AssemblyName.Contains('Benchmark'))
        ">
        <TargetFrameworks>
            net5.0;net6.0;net7.0;net8.0;net9.0;
            netstandard2.0;netstandard2.1
        </TargetFrameworks>
    </PropertyGroup>

    <!-- Extension: subset especial -->
    <PropertyGroup Condition="$(AssemblyName.Contains('Extension')) AND '$(Configuration)'=='Release'">
        <TargetFrameworks>net5.0;net8.0;netstandard2.0</TargetFrameworks>
    </PropertyGroup>

    
    <!-- Import all the props files in the target folder -->
    <Import Project="$(SolutionDir).config/target/BeforeBuild.props"/>
    
    <!-- Import all the props files in the application folder -->
    <Import Project="$(SolutionDir).config/application/Runtimes.props"/>
    <Import Project="$(SolutionDir).config/application/LangVersion.props"/>
    <Import Project="$(SolutionDir).config/application/OutputType.props"/>
    <Import Project="$(SolutionDir).config/application/Optimize.props"/>
    <Import Project="$(SolutionDir).config/application/AllowUnsafeBlocks.props"/>
    <Import Project="$(SolutionDir).config/application/Nullable.props"/>
    <Import Project="$(SolutionDir).config/application/SelfContained.props"/>

    <!-- Import all the props files in the assembly folder -->
    <Import Project="$(SolutionDir).config/assembly/Company.props"/>
    <Import Project="$(SolutionDir).config/assembly/FileVersion.props"/>
    <Import Project="$(SolutionDir).config/assembly/InternalsVisibleTo.props"/>
    <Import Project="$(SolutionDir).config/assembly/NeutralLanguage.props"/>
    <Import Project="$(SolutionDir).config/assembly/Product.props"/>

    <!-- Import all the props files in the build folder -->
    <Import Project="$(SolutionDir).config/builds/NoWarn.props"/>
    <Import Project="$(SolutionDir).config/builds/PublishTrimmed.props"/>
    <Import Project="$(SolutionDir).config/builds/SuppressTfmSupportBuildWarnings.props"/>
    <Import Project="$(SolutionDir).config/builds/TreatWarningsAsErrors.props"/>
    <Import Project="$(SolutionDir).config/builds/WarningLevel.props"/>
    <Import Project="$(SolutionDir).config/builds/WarningsAsErrors.props"/>

    <!-- Import all the props files in the code folder -->
    <Import Project="$(SolutionDir).config/docs/Docs.props"/>

    <!-- Import all the props files in the nuget folder -->
    <Import Project="$(SolutionDir).config/nuget/Packable.props"/>

    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/Authors.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/Copyright.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/Description.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/DocumentationFile.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/FileVersion.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/InformationalVersion.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageIcon.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageLicenseFile.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageProjectUrl.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageReleaseNotes.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageRequireLicenseAcceptance.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageTags.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/PackageVersion.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/RepositoryType.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/RepositoryUrl.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/Title.props"/>
    <Import Condition="$(IsPackable)" Project="$(SolutionDir).config/nuget/Version.props"/>

    <!-- Import all the props files in the reference folder -->
    <Import Project="$(SolutionDir).config/reference/AssetFolder.props"/>
    <Import Project="$(SolutionDir).config/reference/DataFolder.props"/>
    <Import Project="$(SolutionDir).config/reference/ContentFiles.props"/>
    <Import Project="$(SolutionDir).config/reference/EmbeddedResources.props"/>
    <Import Project="$(SolutionDir).config/reference/Projects.props"/>
    <Import Project="$(SolutionDir).config/reference/Packages.props"/>

    <!-- Import all the props files in the test folder -->
    <Import Condition="$(AssemblyName.Contains('Sample')) == true OR $(AssemblyName.Contains('Test')) == true" Project="$(SolutionDir).config/test/ExcludeFromCodeCoverage.props"/>
    <Import Condition="$(AssemblyName.Contains('Sample')) == true OR $(AssemblyName.Contains('Test')) == true" Project="$(SolutionDir).config/test/InternalsVisibleTo.props"/>
    <Import Condition="$(AssemblyName.Contains('Sample')) == true OR $(AssemblyName.Contains('Test')) == true" Project="$(SolutionDir).config/test/ParallelExe.props"/>
    <Import Condition="$(AssemblyName.Contains('Sample')) == true OR $(AssemblyName.Contains('Test')) == true" Project="$(SolutionDir).config/test/SonarQubeExclude.props"/>
    
    <Import Project="$(SolutionDir).config/target/AfterBuild.props"/>
</Project>