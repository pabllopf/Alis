<Project>
    <ItemGroup>
        <GeneratorProjects Include="$(SolutionDir)4_Operation/Ecs/generator/Alis.Core.Ecs.Generator.csproj">
            <OutputAssembly>$(SolutionDir)4_Operation/Ecs/generator/bin/Release/netstandard2.0/Alis.Core.Ecs.Generator.dll</OutputAssembly>
        </GeneratorProjects>

        <GeneratorProjects Include="$(SolutionDir)6_Ideation/Data/generator/Alis.Core.Aspect.Data.Generator.csproj">
            <OutputAssembly>$(SolutionDir)6_Ideation/Data/generator/bin/Release/netstandard2.0/Alis.Core.Aspect.Data.Generator.dll</OutputAssembly>
        </GeneratorProjects>
    </ItemGroup>

    <!-- Compilar solo si faltan las DLLs o si las fuentes cambiaron -->
    <Target Name="BuildAllGenerators"
            BeforeTargets="Restore;Build;Publish"
            Condition="'$(Configuration)' == 'Release' 
                     AND $(AssemblyName.Contains('Generator')) == false"
            Inputs="@(GeneratorProjects);@(GeneratorProjects->'%(RootDir)%(Directory)/**/*.cs')"
            Outputs="@(GeneratorProjects->'%(OutputAssembly)')">

        <MSBuild
            Projects="@(GeneratorProjects)"
            Properties="Configuration=Release;TargetFramework=netstandard2.0"
            Targets="Build" />

    </Target>
</Project>
