<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup Condition="$([MSBuild]::IsOSPlatform('windows'))">
      <TargetFramework>net6.0-windows10.0.19041.0</TargetFramework>
    <OutputType>Exe</OutputType>
    <UseMaui>true</UseMaui>
    <SingleProject>true</SingleProject>
    <EnablePreviewMsixTooling>true</EnablePreviewMsixTooling>
      <ApplicationTitle>Alis.Template.Game.Desktop.Windows</ApplicationTitle>

      <ApplicationId>com.companyname.Alis.Template.Game.Desktop.Windows</ApplicationId>
      <ApplicationIdGuid>FFDC4434-63F8-44ED-B1B3-9830B9D75921</ApplicationIdGuid>

    <ApplicationVersion>1</ApplicationVersion>
    <ApplicationDisplayVersion>1.0</ApplicationDisplayVersion>
    <LangVersion>10.0</LangVersion>
    
    <UseInterpreter Condition="'$(Configuration)' == 'Debug'">True</UseInterpreter>
    <SupportedOSPlatformVersion Condition="$(TargetFramework.Contains('-windows'))">10.0.17763.0</SupportedOSPlatformVersion>
  </PropertyGroup>

    <ItemGroup Condition="$(TargetFramework.Contains('-windows'))">
        <!-- Required - WinUI does not yet have buildTransitive for everything -->
        <PackageReference Include="Microsoft.WindowsAppSDK" Version="1.1.5" />
        <PackageReference Include="Microsoft.Graphics.Win2D" Version="1.0.4" />
    </ItemGroup>

    <ItemGroup Condition="$([MSBuild]::IsOSPlatform('windows'))">
        <MauiIcon Include="Resources\appicon.png" IsAppIcon="true" Color="#F8F8F8" />
        <MauiSplashScreen Include="Resources\alis_banner.png" BaseSize="256" Color="#F8F8F8" />
        <PackageReference Include="SkiaSharp.Views.Maui.Controls.Compatibility" Version="2.88.1" />
        <PackageReference Include="SkiaSharp.Views.Maui.Controls" Version="2.88.1" />
        <ProjectReference Include="..\Alis.Template.Game\Alis.Template.Game.csproj" />
    </ItemGroup>
    
    <PropertyGroup Condition="&#xA;    $([MSBuild]::IsOSPlatform('osx')) OR&#xA;    $([MSBuild]::IsOSPlatform('linux'))">
        <OutputType>Exe</OutputType>
        <TargetFrameworks>net6.0;</TargetFrameworks>
        <DefineConstants>$(DefineConstants);UNSUPPORTED;</DefineConstants>
    </PropertyGroup>

    <ItemGroup Condition="&#xA;    $([MSBuild]::IsOSPlatform('osx')) OR &#xA;    $([MSBuild]::IsOSPlatform('linux'))">
        <None Remove="App.xaml" />
        <None Remove="MainPage.xaml" />
        <Compile Remove="App.xaml.cs" />
        <Compile Remove="MainPage.xaml.cs" />
        <Compile Update="Platforms\Windows\App.xaml.cs">
          <DependentUpon>App.xaml</DependentUpon>
          <SubType>Code</SubType>
          <ExcludeFromCurrentConfiguration>false</ExcludeFromCurrentConfiguration>
        </Compile>
        <Compile Update="Platforms\Windows\App.xaml.cs">
          <DependentUpon>App.xaml</DependentUpon>
          <SubType>Code</SubType>
          <ExcludeFromCurrentConfiguration>false</ExcludeFromCurrentConfiguration>
        </Compile>
        <Compile Remove="Platforms\**" />
        <None Remove="Platforms\**" />
        <MauiPlatformSpecificFolder Remove="Platforms\Android\" />
        <MauiPlatformSpecificFolder Remove="Platforms\iOS\" />
        <MauiPlatformSpecificFolder Remove="Platforms\MacCatalyst\" />
        <MauiPlatformSpecificFolder Remove="Platforms\Tizen\" />
        <EmbeddedResource Remove="Platforms\**" />
    </ItemGroup>
    
    
    <Target Name="RestrictOS" BeforeTargets="Compile">
        <PropertyGroup Condition="$([MSBuild]::IsOSPlatform('osx')) OR $([MSBuild]::IsOSPlatform('linux'))">
            <UnsupportedTarget>true</UnsupportedTarget>
        </PropertyGroup>
        <Warning Code="UNSUPPORTED" Text="Can't compile 'Macos apps' on MacOS or Linux OS." Condition=" '$(UnsupportedTarget)' == 'true' " />
    </Target>
</Project>