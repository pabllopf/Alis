<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup Condition="$([MSBuild]::IsOSPlatform('osx'))">
        <TargetFrameworks>net6.0-maccatalyst;$(TargetFrameworks)</TargetFrameworks>
        <OutputType>Exe</OutputType>
        <UseMaui>true</UseMaui>
        <SingleProject>true</SingleProject>
        <EnablePreviewMsixTooling>true</EnablePreviewMsixTooling>

        <DefineConstants>$(DefineConstants);OSX</DefineConstants>

        <ApplicationTitle>Alis.Template.Game.Desktop.MacOS</ApplicationTitle>
        <ApplicationId>com.companyname.Alis.Template.Game.Desktop.MacOS</ApplicationId>

        <ApplicationVersion>1</ApplicationVersion>
        <ApplicationDisplayVersion>1.0</ApplicationDisplayVersion>
        <LangVersion>10.0</LangVersion>

        <UseInterpreter Condition="'$(Configuration)' == 'Debug'">True</UseInterpreter>
        <SupportedOSPlatformVersion>14.0</SupportedOSPlatformVersion>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
        <PublishTrimmed>true</PublishTrimmed>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Release'">
        <PublishTrimmed>true</PublishTrimmed>
    </PropertyGroup>

    <ItemGroup Condition="$([MSBuild]::IsOSPlatform('osx'))">
        <MauiIcon Include="Resources\appicon.png" IsAppIcon="true" Color="#F8F8F8"/>
        <PackageReference Include="SkiaSharp.Views.Maui.Controls.Compatibility" Version="2.88.3"/>
        <PackageReference Include="SkiaSharp.Views.Maui.Controls" Version="2.88.3"/>
        <ProjectReference Include="..\Alis.Template.Game\Alis.Template.Game.csproj"/>
    </ItemGroup>

    <PropertyGroup Condition="$([MSBuild]::IsOSPlatform('windows')) OR&#xA;    $([MSBuild]::IsOSPlatform('linux'))">
        <OutputType>Exe</OutputType>
        <TargetFrameworks>net6.0;</TargetFrameworks>
        <DefineConstants>$(DefineConstants);UNSUPPORTED;</DefineConstants>
    </PropertyGroup>

    <ItemGroup Condition="&#xA;    $([MSBuild]::IsOSPlatform('windows')) OR &#xA;    $([MSBuild]::IsOSPlatform('linux'))">
        <None Remove="App.xaml"/>
        <None Remove="MainPage.xaml"/>
        <Compile Remove="App.xaml.cs"/>
        <Compile Remove="MainPage.xaml.cs"/>
        <Compile Remove="Platforms\**"/>
        <None Remove="Platforms\**"/>
        <EmbeddedResource Remove="Platforms\**"/>
    </ItemGroup>

    <Target Name="RestrictOS" BeforeTargets="Compile">
        <PropertyGroup Condition="$([MSBuild]::IsOSPlatform('windows')) OR $([MSBuild]::IsOSPlatform('linux'))">
            <UnsupportedTarget>true</UnsupportedTarget>
        </PropertyGroup>
        <Warning Code="UNSUPPORTED" Text="Can't compile 'Macos apps' on Windows or Linux OS." Condition=" '$(UnsupportedTarget)' == 'true' "/>
    </Target>
</Project>